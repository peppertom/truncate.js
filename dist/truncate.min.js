!function(t,e,i){function n(t){return t.replace(/\s*$/,"")}function s(t){var e=new RegExp(String.fromCharCode(160),"g");return t.replace(e," ")}function o(t,e){var i=t.substr(text.lastIndexOf(" "),text.length-1);return t=t.replace(i,e)}function r(t,e,i){if("word"===i.wrap&&(e=s(e),e=o(e,i.ellipsis)),t.innerText)t.innerText=e;else if(t.nodeValue)t.nodeValue=e;else{if(!t.textContent)return!1;t.textContent=e}}function h(t,e,i,n){var s,o=t.parent();t.remove();var h=i?i.length:0;if(o.contents().length>h)return s=o.contents().eq(-1-h),d(s,e,i,n);var l=o.prev();return s=l.contents().eq(-1),!!s.length&&(r(s[0],s.text()+n.ellipsis,n),o.remove(),i.length&&l.append(i),!0)}function l(t,e,i,s){for(var o,l,a=t[0],p=t.text(),d="",u=0,c=p.length;u<=c;)o=u+(c-u>>1),l=s.ellipsis+n(p.substr(o-1,p.length)),r(a,l,s),e.height()>s.maxHeight?u=o+1:(c=o-1,d=d.length>l.length?d:l);return d.length>0?(r(a,d,s),!0):h(t,e,i,s)}function a(t,e,i,s){for(var o,l,a=t[0],p=t.text(),d="",u=0,c=p.length;u<=c;)o=u+(c-u>>1),l=n(p.substr(0,o+1))+s.ellipsis,r(a,l,s),e.height()>s.maxHeight?c=o-1:(u=o+1,d=d.length>l.length?d:l);return d.length>0?(r(a,d,s),!0):h(t,e,i,s)}function p(t,e,i,s){for(var o,l,a=t[0],p=t.text(),d="",u=0,c=p.length,g=c>>1;u<=g;)o=u+(g-u>>1),l=n(p.substr(0,o))+s.ellipsis+p.substr(c-o,c-o),r(a,l,s),e.height()>s.maxHeight?g=o-1:(u=o+1,d=d.length>l.length?d:l);return d.length>0?(r(a,d,s),!0):h(t,e,i,s)}function d(t,e,i,n){return"end"===n.position?a(t,e,i,n):"start"===n.position?l(t,e,i,n):p(t,e,i,n)}function u(t,i,n,s){var o,r,h=t[0],l=t.contents(),a=l.length,p=a-1,u=!1;for(t.empty();p>=0&&!u;p--)o=l.eq(p),r=o[0],8!==r.nodeType&&(h.insertBefore(r,h.firstChild),n.length&&(e.inArray(h.tagName.toLowerCase(),m)>=0?t.after(n):t.append(n)),i.height()>s.maxHeight&&(u=3===r.nodeType?d(o,i,n,s):g(o,i,n,s)),!u&&n.length&&n.remove());return u}function c(t,i,n,s){var o,r,h=t[0],l=t.contents(),a=0,p=l.length,u=!1;for(t.empty();a<p&&!u;a++)o=l.eq(a),r=o[0],8!==r.nodeType&&(h.appendChild(r),n.length&&(e.inArray(h.tagName.toLowerCase(),m)>=0?t.after(n):t.append(n)),i.height()>s.maxHeight&&(u=3===r.nodeType?d(o,i,n,s):g(o,i,n,s)),!u&&n.length&&n.remove());return u}function g(t,e,i,n){return"end"===n.position?c(t,e,i,n):"start"===n.position?u(t,e,i,n):c(t,e,i,n)}function f(t,i){this.element=t,this.$element=e(t),this._name="truncate",this._defaults={lines:1,ellipsis:"â€¦",showMore:"",showLess:"",position:"end",lineHeight:"auto",wrap:"letter"},this.config(i),this.original=this.cached=t.innerHTML,this.isTruncated=!1,this.isCollapsed=!0,this.update()}var m=["table","thead","tbody","tfoot","tr","col","colgroup","object","embed","param","ol","ul","dl","blockquote","select","optgroup","option","textarea","script","style"];f.prototype={config:function(t){if(this.options=e.extend({},this._defaults,t),"auto"===this.options.lineHeight){var n=this.$element.css("line-height"),s=18;"normal"!==n&&(s=parseInt(n,10)),this.options.lineHeight=s}this.options.maxHeight===i&&(this.options.maxHeight=parseInt(this.options.lines,10)*parseInt(this.options.lineHeight,10)),"start"!==this.options.position&&"middle"!==this.options.position&&"end"!==this.options.position&&(this.options.position="end"),this.options.wrap===i&&(this.options.wrap="letter"),this.$clipNode=e(e.parseHTML(this.options.showMore),this.$element),this.original&&this.update()},update:function(t){var e=!this.isCollapsed;"undefined"!=typeof t?this.original=this.element.innerHTML=t:this.isCollapsed&&this.element.innerHTML===this.cached&&(this.element.innerHTML=this.original);var i=this.$element.wrapInner("<div/>").children();i.css({border:"none",margin:0,padding:0,width:"auto",height:"auto","word-wrap":"break-word"}),this.isTruncated=!1,i.height()>this.options.maxHeight?(this.isTruncated=g(i,i,this.$clipNode,this.options),this.isExplicitlyCollapsed&&(this.isCollapsed=!0,e=!1)):this.isCollapsed=!1,i.replaceWith(i.contents()),this.cached=this.element.innerHTML,e&&(this.element.innerHTML=this.original)},expand:function(){var t=!0;this.isExplicitlyCollapsed&&(this.isExplicitlyCollapsed=!1,t=!1),this.isCollapsed&&(this.isCollapsed=!1,this.element.innerHTML=this.isTruncated?this.original+(t?this.options.showLess:""):this.original)},collapse:function(t){this.isExplicitlyCollapsed=!0,this.isCollapsed||(this.isCollapsed=!0,t=t||!1,t?this.update():this.element.innerHTML=this.cached)}},e.fn.truncate=function(t){var i=e.makeArray(arguments).slice(1);return this.each(function(){var n=e.data(this,"jquery-truncate");n?"function"==typeof n[t]&&n[t].apply(n,i):e.data(this,"jquery-truncate",new f(this,t))})},t.Truncate=f}(this,jQuery);